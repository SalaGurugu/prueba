var N=Object.defineProperty,C=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var f=(a,e,l)=>e in a?N(a,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[e]=l,V=(a,e)=>{for(var l in e||(e={}))R.call(e,l)&&f(a,l,e[l]);if(y)for(var l of y(e))F.call(e,l)&&f(a,l,e[l]);return a},v=(a,e)=>C(a,E(e));import{k as d,q as u,y as s,z as c,K as T,F as x,G as S,E as q,A as n,u as r,L as w,M as $,N as m}from"./@vue.40bd5dcf.js";import{d as b,s as k,N as z}from"./index.b3e3cc53.js";import{d as L}from"./pinia.1e922daa.js";import{e as M,w as D,o as G,b as g,Y,c as U,u as A,d as h,f as j,h as K}from"./@firebase.80835a34.js";import{u as B}from"./vue-router.d2191ded.js";import"./firebase.32384bd0.js";import"./bootstrap.f0de601a.js";import"./@popperjs.2eb7191b.js";import"./tslib.285d8b56.js";const P={class:"container"},H={class:"mb-3"},J={class:"form-label"},O=["placeholder","value"],i={props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""}},setup(a){return(e,l)=>(d(),u("div",P,[s("div",H,[s("label",J,c(a.label),1),s("input",{type:"text",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:l[0]||(l[0]=t=>e.$emit("update:modelValue",t.target.value))},null,40,O)])]))}},Q={class:"container"},W={class:"mb-3"},X={class:"form-label"},Z=["placeholder","value"],ee={props:{label:{type:String,default:""},modelValue:{type:[Date,String,Number],default:""}},setup(a){return(e,l)=>(d(),u("div",Q,[s("div",W,[s("label",X,c(a.label),1),s("input",{type:"date",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:l[0]||(l[0]=t=>e.$emit("update:modelValue",t.target.value))},null,40,Z)])]))}},te={class:"container"},ae={class:"mb-3"},oe={class:"form-label"},le=["placeholder","value"],se={props:{label:{type:String,default:""},modelValue:{type:[String,Number],default:""}},setup(a){return(e,l)=>(d(),u("div",te,[s("div",ae,[s("label",oe,c(a.label),1),s("textarea",{type:"text",class:"form-control",placeholder:a.label,value:a.modelValue,onInput:l[0]||(l[0]=t=>e.$emit("update:modelValue",t.target.value)),rows:"3"},null,40,le)])]))}},re={class:"container"},ne={class:"mb-3"},ie={class:"form-label"},de=["value"],ue=["value","selected"],ce={props:{opciones:{type:Array,required:!0},label:{type:String,default:""},modelValue:{type:[String,Number],default:""}},setup(a){return(e,l)=>(d(),u("div",re,[s("div",ne,[s("label",ie,c(a.label),1),s("select",T({class:"form-select",value:a.modelValue},v(V({},e.$attrs),{onChange:t=>{e.$emit("update:modelValue",t.target.value)}})),[(d(!0),u(x,null,S(a.opciones,t=>(d(),u("option",{value:t,key:t,selected:t===a.modelValue},c(t),9,ue))),128))],16,de)])]))}},_=B(),be=L({id:"principal",state:()=>({file:null,datoImagen:null,error:null,editar:!1,loading:!1,urlDescarga:"",ages:["A partir de 6 meses","A partir de 3 anos","A partir de 4 anos","A partir de 5 anos","A partir de 6 anos"],obras:[],obra:{id:"",title:"",company:"",director:"",cast:"",synopsis:"",duration:"",link:"",date:"",showA:"",showB:"",age:"",photo:""}}),actions:{async obtenerDatos(){this.obras=[],(await M(D(b,"obras"))).forEach(e=>{let l=e.data();l.id=e.id,this.obras.push(l),console.log(l)})},async eliminarDato(a){await G(g(b,"obras",a)),_.go("/")},async obtenerDatoID(a){const e=g(b,"obras",a),l=await Y(e);l.exists()?(this.obra=l.data(),this.obra.id=l.id):console.log("\xA1No existe el documento!")},buscarImagen(a){const e=a.target.files[0].type;if(e==="image/jpeg"||e==="image/png")this.file=a.target.files[0],this.error=null;else{this.error="Archivo no v\xE1lido",this.file=null;return}const l=new FileReader;l.readAsDataURL(this.file),l.onload=t=>{this.datoImagen=t.target.result}},async agregarDato(){try{this.loading=!0;const a=U(k,"imagenes/"+this.file.name),e=A(a,this.file);e.on("state_changed",t=>{const o=t.bytesTransferred/t.totalBytes*100;switch(console.log("Upload is "+o+"% done"),t.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},t=>{},()=>{h(e.snapshot.ref).then(t=>{console.log("File available at",t),alert("Subida completada")})});const l=await h(a);await j(D(b,"obras"),{title:this.obra.title,company:this.obra.company,director:this.obra.director,cast:this.obra.cast,synopsis:this.obra.synopsis,duration:this.obra.duration,link:this.obra.link,date:this.obra.date,showA:this.obra.showA,showB:this.obra.showB,age:this.obra.age,photo:l}),this.error="Imagen subida con \xE9xito",this.file=null}catch(a){console.log(a)}finally{B().push("/"),this.loading=!1}},async actualizarDato(){try{this.loading=!0;const a=U(k,"imagenes/"+this.file.name),e=A(a,this.file);e.on("state_changed",o=>{const p=o.bytesTransferred/o.totalBytes*100;switch(console.log("Upload is "+p+"% done"),o.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},o=>{},()=>{h(e.snapshot.ref).then(o=>{console.log("File available at",o),alert("Subida completada")})});const l=await h(a),t=g(b,"obras",this.obra.id);await K(t,{title:this.obra.title,company:this.obra.company,director:this.obra.director,cast:this.obra.cast,synopsis:this.obra.synopsis,duration:this.obra.duration,link:this.obra.link,date:this.obra.date,showA:this.obra.showA,showB:this.obra.showB,age:this.obra.age,photo:l}),this.error="Imagen subida con \xE9xito",this.file=null}catch(a){console.log(a)}finally{_.push("/"),this.loading=!1}}}}),pe={class:"container my-4",style:{"padding-top":"70px"}},me={class:"input-group my-3"},he={class:"mt-3"},ge={class:"mt-4"},ye=["src"],fe={class:"table"},Ve=s("thead",null,[s("tr",null,[s("th",{scope:"col"},"id"),s("th",{scope:"col"},"Author"),s("th",{scope:"col"},"Fecha"),s("th",{scope:"col"},"Editar"),s("th",{scope:"col"},"Eliminar")])],-1),ve={scope:"row"},we=["onClick"],$e=["onClick"],Ce={setup(a){const e=be();return q(()=>{e.obtenerDatos()}),(l,t)=>(d(),u("div",null,[n(z),s("div",pe,[s("form",null,[n(i,{modelValue:r(e).obra.title,"onUpdate:modelValue":t[0]||(t[0]=o=>r(e).obra.title=o),type:"text",label:"T\xEDtulo"},null,8,["modelValue"]),n(i,{modelValue:r(e).obra.company,"onUpdate:modelValue":t[1]||(t[1]=o=>r(e).obra.company=o),type:"text",label:"Compa\xF1ia"},null,8,["modelValue"]),n(i,{modelValue:r(e).obra.director,"onUpdate:modelValue":t[2]||(t[2]=o=>r(e).obra.director=o),type:"text",label:"Director"},null,8,["modelValue"]),n(i,{modelValue:r(e).obra.cast,"onUpdate:modelValue":t[3]||(t[3]=o=>r(e).obra.cast=o),type:"text",label:"Elenco"},null,8,["modelValue"]),n(se,{modelValue:r(e).obra.synopsis,"onUpdate:modelValue":t[4]||(t[4]=o=>r(e).obra.synopsis=o),type:"text",label:"Descripci\xF3n"},null,8,["modelValue"]),n(i,{modelValue:r(e).obra.time,"onUpdate:modelValue":t[5]||(t[5]=o=>r(e).obra.time=o),type:"text",default:"60 minutos",label:"Duraci\xF3n"},null,8,["modelValue"]),n(i,{modelValue:r(e).obra.link,"onUpdate:modelValue":t[6]||(t[6]=o=>r(e).obra.link=o),type:"text",label:"Enlace"},null,8,["modelValue"]),n(ee,{modelValue:r(e).obra.date,"onUpdate:modelValue":t[7]||(t[7]=o=>r(e).obra.date=o),type:"date",label:"Fecha"},null,8,["modelValue"]),n(i,{modelValue:r(e).obra.showA,"onUpdate:modelValue":t[8]||(t[8]=o=>r(e).obra.showA=o),type:"text",label:"1\xBA funci\xF3n"},null,8,["modelValue"]),n(i,{modelValue:r(e).obra.showB,"onUpdate:modelValue":t[9]||(t[9]=o=>r(e).obra.showB=o),type:"text",label:"2\xBA funci\xF3n"},null,8,["modelValue"]),n(ce,{modelValue:r(e).obra.age,"onUpdate:modelValue":t[10]||(t[10]=o=>r(e).obra.age=o),opciones:r(e).ages,label:"Selecciona una categor\xEDa"},null,8,["modelValue","opciones"]),n(i,{modelValue:r(e).obra.photo,"onUpdate:modelValue":t[11]||(t[11]=o=>r(e).obra.photo=o),type:"text",label:"Imagen"},null,8,["modelValue"]),s("div",me,[s("input",{type:"file",onChange:t[12]||(t[12]=o=>r(e).buscarImagen(o))},null,32)]),s("div",he,[w(s("button",{onClick:t[13]||(t[13]=m(o=>r(e).actualizarDato(l.id),["prevent"])),class:"btn btn-primary"}," Actualizar ",512),[[$,r(e).editar===!0]]),w(s("button",{onClick:t[14]||(t[14]=m(o=>r(e).agregarDato(),["prevent"])),class:"btn btn-primary"}," Guardar ",512),[[$,r(e).editar===!1]]),s("div",ge,[s("img",{src:r(e).datoImagen},null,8,ye)])])])]),s("table",fe,[Ve,s("tbody",null,[(d(!0),u(x,null,S(r(e).obras,(o,p)=>(d(),u("tr",{key:p},[s("th",ve,c(p),1),s("td",null,c(o.company),1),s("td",null,c(o.date),1),s("td",null,[s("button",{onClick:m(I=>{r(e).obtenerDatoID(o.id),this.datos.editar=!this.datos.editar},["prevent"]),class:"btn btn-primary"},"Editar ",8,we)]),s("td",null,[s("button",{onClick:m(I=>r(e).eliminarDato(o.id),["prevent"]),class:"btn btn-danger"},"Eliminar ",8,$e)])]))),128))])])]))}};export{Ce as default};
